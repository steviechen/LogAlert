<h1 align="center">Logex - Anomaly Detection Service by Text Mining</h1>

<p align="center">Using Text Mining models as auto identification service to realtime tracking_ids' exceptions.</p>

<p align="center">
  <a href="#highlights">Highlights</a> •
  <a href="#what-is-it">What is it</a> •
  <a href="#install-config">Install and Config</a> •
  <a href="#server-and-client-api">API</a>
  
</p>

<h6 align="center">Made by Stevie Chen; Luke Lu; Jeven Zhou; Alexander Yang</h6>

<h3>Highlights</h3>

- **State-of-the-art**: build on Doc2Vec and Word2Vec models, which are provided from trusted gensim and sklearn nlp libraries.
- **Easy-to-use**: auto-labeling and exception-detecting by calling well-designed restful apis.
- **Fast**: 1500 tracking_ids per hour on a single VM with 2 cores and 8GB ram. Low latency, optimized for speed.
- **Scalable**: scale nicely and smoothly on multiple vm without worrying about concurrency.
- **Reliable**: tested on multi-million tracking_ids; days of running without a break or OOM or any nasty exceptions.


<h3>What is it</h3>

- **Doc2Vec and Word2Vec** are wildly-used NLP models [developed by Gensim](https://radimrehurek.com/gensim/) for transforming text into a vector space representations. The models used in this scenario leverage an enormous amount of tracking_ids' text data generated by different components and server types from different data centers, and is trained in an semi-supervised manner.

- **Text Encoding/Embedding** is a upstream task required in many NLP applications, e.g. similarity queries, sentiment analysis, text classification. The goal is to represent a variable length sentence into a fixed length vector, e.g. `cisco webex` to `[0.1, 0.3, 0.9]`. Each element of the vector should "encode" some semantics of the original text.
<p align="center"><img src="./docs/workflow.gif?raw=true"/></p>

- **Auto Labelling/Tagging** is defined by most similar case which recorded as target tracking_id within the threshold as hyper-parameter.
<p align="center"><img src="./docs/similarity.gif?raw=true"/></p>

- **Unknown Tracking_id Understanding** apples unsupervised algorithms to detect the potential topics and keywords to assist human being going through the unknown cases as soon as possible.

- **Finally, `logex`** uses *D2V/W2V* as a tracking_id logs encoder, uses *cosine/levenshtein distance* to calculate the similarities between target tracking_ids and realtime tracking_id, and hosts it as a service via Flask, allowing you to labelling the tracking_id and understanding/defining the unknown ones. 

<h3>Install and Config</h3>

Service can be installed separately or even on *different* machines:
#### 1. Deploy code and data
Download code and data archives, then uncompress the zip file into project folder, say `/apps/Logex-service/`
```bash
LogEx-master
LogEx-data
```
in data folder, you may see
```bash
input
output
rawdata
```

#### 2. Obtain Models
Two ways to initiate the models:
- Directly train models by given corpora which provided as formatted csv on folder `./data/rawdata/`, folder contains something like: 
```bash
mcrsvr_sj_1030.csv                                     277K
```
then call the request [Train Model](#train-model)

- Copy pretrained models to folder `./data/output/model/`, folder contains something like: 
```bash
d2v_dbow_meeting&mcrsvr.model                          52M
d2v_dbow_meeting&mngsvr.model                          60M
w2v_meeting&mcrsvr.model                               14M
w2v_meeting&mngsvr.model                               23M
```
then call the request [Load Model](#load-model)

#### 3. Insert target tracking_id as known cases
Origin text of target tracking_ids has been saved on `./data/input/`, folder contains something like: 
```bash
resFilter_meeting&mcrsvr&1030.csv                      945M
resFilter_target_meeting&mcrsvr.csv                    15K
resFilter_target_meeting&mngsvr.csv                    43K
```
names contained *target* indicate that this file has content of target tracking_id.
There are three methods to maintain the target tracking_id by call request [Load Targets](#load-target).
- Load;
- Append;
- Delete.


#### 4. Adjust hyper-parameters
Two hyper-parameters shall be fine-tuned based on experiences of understanding current scenario
```bash
unknownDist = 0.2
levenshteinWeight = 0.05
```
- unknownDist means threshold to determine if the case is unknown;
- levenshteinWeight is a scalar to calculate the importance of levenshtein distance.

Note that the server MUST be running on **Python >= 3.6** . Again, the server does not support Python 2!

<h3>Restful API</h3>
More details please go to page [LogExRestful](./LogExRestful.md)